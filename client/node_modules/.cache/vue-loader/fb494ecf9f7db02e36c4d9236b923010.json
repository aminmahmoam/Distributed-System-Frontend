{"remainingRequest":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aminmahmoudi/Desktop/DIT356/client 2/client/src/views/Booking.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/src/views/Booking.vue","mtime":1673261791083},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBIb21lIGZyb20gJy4vSG9tZS52dWUnCmltcG9ydCBtcXR0IGZyb20gJy4uL01RVFQnCmltcG9ydCBTd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJwppbXBvcnQgcm91dGVyIGZyb20gJy4uL3JvdXRlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEhvbWUgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6ICcnLAoKICAgICAgZGF0ZTogJycsCiAgICAgIGNsaW5pY05hbWU6ICcnLAogICAgICB0aW1lOiAnJywKICAgICAgZGVudGlzdDogJycsCgogICAgICBuZXdCb29raW5nOiAnJywKICAgICAgbmV3RGF0ZTogJycsCiAgICAgIGNsaW5pY3M6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgYWRkcmVzczogJycsCgogICAgICBib29rUmVzdWx0OiBCb29sZWFuLAogICAgICB0ZXN0VGltZTogbnVsbAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIHRoaXMuZ2V0TmFtZXMoKQogICAgdGhpcy5zaG93RGF0YSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICB0ZXN0KCkgewogICAgICBsZXQgbmV3Qm9va2luZyA9IHsKICAgICAgICAvLyB1c2VySWQ6IHRoaXMudXNlcklkLAogICAgICAgIHJlcXVlc3RJZDogdGhpcy5nZW5lcmF0ZUlkKDMwKSwKICAgICAgICBkZW50aXN0SWQ6ICt0aGlzLmRlbnRpc3Quc3Vic3RyKDcsIDcpLAogICAgICAgIGlzc3VhbmNlOiB0aGlzLmdlbmVyYXRlSWQoMzApLAogICAgICAgIGRhdGU6IHRoaXMuZGF0ZSwKICAgICAgICB0aW1lOiB0aGlzLnRpbWUuc3Vic3RyKDEsIDUpLAogICAgICAgIGNsaW5pY05hbWU6IHRoaXMuY2xpbmljTmFtZSwKCiAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dpblRva2VuJykKCiAgICAgIH0KICAgICAgbGV0IHVzZXIgPSB0aGlzLnBhcnNlSnd0KGxvY2FsU3RvcmFnZS5sb2dpblRva2VuKQoKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgICAgbXF0dCgncG9zdEJvb2tpbmdGb3JVc2VyJywgYC91c2Vycy8ke3VzZXIuX2lkfS9ib29raW5nc2AsIG5ld0Jvb2tpbmcsIGZhbHNlKQogICAgICAgIG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgICBtcXR0KCdwb3N0Qm9va2luZ0ZvclVzZXInLCBgL3VzZXJzLyR7dXNlci5faWR9L2Jvb2tpbmdzYCwgbmV3Qm9va2luZywgZmFsc2UpCiAgICAgIAogICAgfSwKICAgIAogICAgLy8gR2V0IGNsaW5pYyBkYXRhCiAgICBnZXROYW1lcygpIHsKICAgICAgdGhpcy5jbGluaWNzID0gbXF0dCgnZ2V0QWxsQycsICcvY2xpbmljcycsIHRoaXMuZGF0YSkKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jbGluaWNzWzBdLmRhdGEuZGVudGlzdHNbMF0ubmFtZQogICAgICAgIHRoaXMuYWRkcmVzcyA9IHRoaXMuY2xpbmljc1swXS5kYXRhLmRlbnRpc3RzWzBdLmFkZHJlc3MKICAgICAgfSwgMTAwMCkKICAgIH0sCiAgICBzaG93RGF0YSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy4kcm91dGUucXVlcnkpCiAgICAgIGxldCByZXN1bHQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5kYXRlCiAgICAgIHRoaXMuZGF0ZSA9IHJlc3VsdC5zdWJzdHIoMCwgMTApCiAgICAgIHRoaXMuY2xpbmljTmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm5hbWUKICAgICAgdGhpcy50aW1lID0gdGhpcy4kcm91dGUucXVlcnkudGltZQogICAgICB0aGlzLmRlbnRpc3QgPSB0aGlzLiRyb3V0ZS5xdWVyeS5kZW50aXN0CiAgICB9LAoKICAgIC8vIEluaXRpYXRlIGJvb2tpbmcKICAgIGJvb2tOb3coKSB7CiAgICAgIGNvbnN0IHN3YWxXaXRoQm9vdHN0cmFwQnV0dG9ucyA9IFN3YWwubWl4aW4oewogICAgICAgIGN1c3RvbUNsYXNzOiB7CiAgICAgICAgICBjb25maXJtQnV0dG9uOiAnYnRuIGJ0bi1zdWNjZXNzJywKICAgICAgICAgIGNhbmNlbEJ1dHRvbjogJ2J0biBidG4tY2FuY2VsJwogICAgICAgIH0sCiAgICAgICAgYnV0dG9uc1N0eWxpbmc6IHRydWUKICAgICAgfSkKICAgICAgc3dhbFdpdGhCb290c3RyYXBCdXR0b25zLmZpcmUoewogICAgICAgIHRleHQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gYm9vayB0aGlzIHRpbWVzbG90PycsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0Jvb2snLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWwnLAogICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAnUmVkJywKICAgICAgICByZXZlcnNlQnV0dG9uczogdHJ1ZQogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICBpZiAocmVzdWx0LmlzQ29uZmlybWVkKSB7CiAgICAgICAgICB0aGlzLmJvb2soKQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLmJvb2tSZXN1bHQgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzd2FsV2l0aEJvb3RzdHJhcEJ1dHRvbnMuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0Jvb2tlZCcsCiAgICAgICAgICAgICAgICB0ZXh0OiAnVGhlIHRpbWUgaGFzIGJlZW4gYm9va2VkIScsCiAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjMzA4NWQ2JywKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnT0snLAogICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0NvbmZpcm1lZCkgewogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKCIvIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHN3YWxXaXRoQm9vdHN0cmFwQnV0dG9ucy5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnVW5zdWNjZXNzZnVsJywKICAgICAgICAgICAgICAgIHRleHQ6ICdTb21ldGhpbmcgd2VudCB3cm9uZyEnLAogICAgICAgICAgICAgICAgaWNvbjonZXJyb3InLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAnIzMwODVkNicsCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ09LJywKICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbigiLyIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTAwMCkKICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgcmVzdWx0LmRpc21pc3MgPT09IFN3YWwuRGlzbWlzc1JlYXNvbi5jYW5jZWwKICAgICAgICApIHsKICAgICAgICAgIHN3YWxXaXRoQm9vdHN0cmFwQnV0dG9ucy5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICdDYW5jZWxsZWQnLAogICAgICAgICAgICB0ZXh0OiAnQm9va2luZyBpcyBjYW5jZWxlZCEnLAogICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjMzA4NWQ2JywKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdPSycsCiAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0NvbmZpcm1lZCkgewogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oIi8iKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyBDcmVhdGUgYm9va2luZyBJRAogICAgZ2VuZXJhdGVJZChsZW5ndGgpIHsKICAgICAgbGV0IHJlc3VsdCA9ICcnCiAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknCiAgICAgIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aAogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQKICAgIH0sCiAgICBwYXJzZUp3dCh0b2tlbikgewogICAgICBjb25zdCBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdCiAgICAgIGNvbnN0IGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpCiAgICAgIGNvbnN0IGpzb25QYXlsb2FkID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5hdG9iKGJhc2U2NCkuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiAnJScgKyAoJzAwJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKQogICAgICB9KS5qb2luKCcnKSkKICAgICAgbGV0IHVzZXIgPSBKU09OLnBhcnNlKGpzb25QYXlsb2FkKQogICAgICByZXR1cm4gdXNlcgoKICAgIH0sCiAgICBib29rKCkgewogICAgICBsZXQgbmV3Qm9va2luZyA9IHsKICAgICAgICAvLyB1c2VySWQ6IHRoaXMudXNlcklkLAogICAgICAgIHJlcXVlc3RJZDogdGhpcy5nZW5lcmF0ZUlkKDMwKSwKICAgICAgICBkZW50aXN0SWQ6ICt0aGlzLmRlbnRpc3Quc3Vic3RyKDcsNyksCiAgICAgICAgaXNzdWFuY2U6ICB0aGlzLmdlbmVyYXRlSWQoMzApLAogICAgICAgIGRhdGU6IHRoaXMuZGF0ZSwKICAgICAgICB0aW1lOiB0aGlzLnRpbWUuc3Vic3RyKDEsNSksCiAgICAgICAgY2xpbmljTmFtZTogdGhpcy5jbGluaWNOYW1lLAoKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2luVG9rZW4nKQoKICAgICAgfQogICAgICBsZXQgdXNlciA9IHRoaXMucGFyc2VKd3QobG9jYWxTdG9yYWdlLmxvZ2luVG9rZW4pCiAgICAgIGNvbnN0IHJlc3VsdCA9IG1xdHQoJ3Bvc3RCb29raW5nRm9yVXNlcicsIGAvdXNlcnMvJHt1c2VyLl9pZH0vYm9va2luZ3NgLCBuZXdCb29raW5nLCBmYWxzZSkKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgaWYgKHJlc3VsdFswXS5kYXRhLmJvb2tpbmdzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzZnVsbCcpCiAgICAgICAgICB0aGlzLmJvb2tSZXN1bHQgPSB0cnVlCiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRbMF0uZGF0YSA9PT0gJzQwMSB1bmF1dGhvcml6ZWQnKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9naW5Ub2tlbicpCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3Vuc3VjY3Nlc2Z1bGwnKQogICAgICAgICAgICB0aGlzLmJvb2tSZXN1bHQgPSBmYWxzZQogICAgICAgICAgfSwgMTAwMCkKICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdFswXS5kYXRhLm1lc3NhZ2UgPT09ICJTb3JyeSwgb3V0IG9mIHNlcnZpY2UgcmlnaHQgbm93IikgewogICAgICAgICAgYWxlcnQoJ1NvcnJ5LCBvdXQgb2Ygc2VydmljZSByaWdodCBub3cuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBzaG9ydCB3aGlsZSEnKQogICAgICAgIH0KICAgICAgICAgZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygndW5zdWNjc2VzZnVsbCcpCiAgICAgICAgICB0aGlzLmJvb2tSZXN1bHQgPSBmYWxzZQogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJvb2tSZXN1bHQpCiAgICAgICAgLy8gcmV0dXJuIGZpbmFsUmVzdWx0CgogICAgICB9LCAxMDAwKQogICAgfQogIH0KfQoK"},{"version":3,"sources":["Booking.vue"],"names":[],"mappings":";AAcA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Booking.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <!-- Booking confirmation box -->\n    <div class=\"booking-box\">\n    <p style=\"margin-bottom: 60px; font-size: 18px; color: #748FC4 \">Please confirm the following details below</p>\n        <h1 style=\"margin-top: 20px; margin-bottom: -1px;\">{{this.clinicName}}</h1>\n        <h style=\"font-size: 24px;\">{{this.dentist}}</h>\n        <h2>{{this.date}}</h2>\n        <h1>{{this.time}}</h1>\n        <div class=\"book-button\" style=\"margin-top: 50px; color: #748FC4\" @click=\"bookNow\"><h class=\"edit-text\">Book Now</h></div>\n        <button class=\"btn\" @click=\"test\">Test</button> \n    </div>\n</template>\n\n<script>\nimport Home from './Home.vue'\nimport mqtt from '../MQTT'\nimport Swal from 'sweetalert2'\nimport router from '../router'\n\nexport default {\n  components: { Home },\n  data() {\n    return {\n      id: '',\n\n      date: '',\n      clinicName: '',\n      time: '',\n      dentist: '',\n\n      newBooking: '',\n      newDate: '',\n      clinics: '',\n      name: '',\n      address: '',\n\n      bookResult: Boolean,\n      testTime: null\n    }\n  },\n  mounted() {\n    // this.getNames()\n    this.showData()\n  },\n  methods: {\n    test() {\n      let newBooking = {\n        // userId: this.userId,\n        requestId: this.generateId(30),\n        dentistId: +this.dentist.substr(7, 7),\n        issuance: this.generateId(30),\n        date: this.date,\n        time: this.time.substr(1, 5),\n        clinicName: this.clinicName,\n\n        token: localStorage.getItem('loginToken')\n\n      }\n      let user = this.parseJwt(localStorage.loginToken)\n\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n        mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n      \n    },\n    \n    // Get clinic data\n    getNames() {\n      this.clinics = mqtt('getAllC', '/clinics', this.data)\n      setTimeout(() => {\n        this.name = this.clinics[0].data.dentists[0].name\n        this.address = this.clinics[0].data.dentists[0].address\n      }, 1000)\n    },\n    showData() {\n      console.log(this.$route.query)\n      let result = this.$route.query.date\n      this.date = result.substr(0, 10)\n      this.clinicName = this.$route.query.name\n      this.time = this.$route.query.time\n      this.dentist = this.$route.query.dentist\n    },\n\n    // Initiate booking\n    bookNow() {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-cancel'\n        },\n        buttonsStyling: true\n      })\n      swalWithBootstrapButtons.fire({\n        text: 'Are you sure you want to book this timeslot?',\n        showCancelButton: true,\n        confirmButtonText: 'Book',\n        cancelButtonText: 'Cancel',\n        cancelButtonColor: 'Red',\n        reverseButtons: true\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.book()\n          setTimeout(() => {\n            if (this.bookResult === true) {\n              swalWithBootstrapButtons.fire({\n                title: 'Booked',\n                text: 'The time has been booked!',\n                icon: 'success',\n                confirmButtonColor: '#3085d6',\n                confirmButtonText: 'OK',\n              }).then((result) => {\n                if (result.isConfirmed) {\n                  window.location.assign(\"/\")\n                }\n              })\n            } else {\n              swalWithBootstrapButtons.fire({\n                title: 'Unsuccessful',\n                text: 'Something went wrong!',\n                icon:'error',\n                confirmButtonColor: '#3085d6',\n                confirmButtonText: 'OK',\n              }).then((result) => {\n                if (result.isConfirmed) {\n                  window.location.assign(\"/\")\n                }\n              })\n            }\n          }, 1000)\n        } else if (\n          result.dismiss === Swal.DismissReason.cancel\n        ) {\n          swalWithBootstrapButtons.fire({\n            title: 'Cancelled',\n            text: 'Booking is canceled!',\n            icon: 'error',\n            confirmButtonColor: '#3085d6',\n            confirmButtonText: 'OK',\n          }).then((result) => {\n            if (result.isConfirmed) {\n              window.location.assign(\"/\")\n            }\n          })\n        }\n      })\n    },\n    // Create booking ID\n    generateId(length) {\n      let result = ''\n      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n      const charactersLength = characters.length\n      for (let i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength))\n      }\n      return result\n    },\n    parseJwt(token) {\n      const base64Url = token.split('.')[1]\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/')\n      const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n      }).join(''))\n      let user = JSON.parse(jsonPayload)\n      return user\n\n    },\n    book() {\n      let newBooking = {\n        // userId: this.userId,\n        requestId: this.generateId(30),\n        dentistId: +this.dentist.substr(7,7),\n        issuance:  this.generateId(30),\n        date: this.date,\n        time: this.time.substr(1,5),\n        clinicName: this.clinicName,\n\n        token: localStorage.getItem('loginToken')\n\n      }\n      let user = this.parseJwt(localStorage.loginToken)\n      const result = mqtt('postBookingForUser', `/users/${user._id}/bookings`, newBooking, false)\n      setTimeout(() => {\n        if (result[0].data.bookings) {\n          console.log('succesfull')\n          this.bookResult = true\n        } else if (result[0].data === '401 unauthorized') {\n          localStorage.removeItem('loginToken')\n          setTimeout(() => {\n            console.log('unsuccsesfull')\n            this.bookResult = false\n          }, 1000)\n        } else if (result[0].data.message === \"Sorry, out of service right now\") {\n          alert('Sorry, out of service right now. Please try again in a short while!')\n        }\n         else {\n          console.log('unsuccsesfull')\n          this.bookResult = false\n        }\n        console.log(this.bookResult)\n        // return finalResult\n\n      }, 1000)\n    }\n  }\n}\n\n</script>\n\n<style>\n    .booking-box {\n    margin-top: 3rem;\n    box-sizing: border-box;\n    height: auto;\n    border-radius: 25px;\n    text-align: center;\n    margin-left: 30%;\n    margin-right: 30%;\n    background: #ffffff;\n    padding: 40px;\n    color: #4B6AA7;\n    box-shadow: 4px 10px 10px rgba(143, 145, 190, 0.25);\n    }\n    .book-button {\n    padding: 14px;\n    display:inline-block;\n    text-align: center;\n    margin-top: 1rem;\n    box-sizing: border-box;\n    height: auto;\n    background-color: #748FC4;\n    color: #ffffff;\n    border-radius: 23px;\n    cursor: pointer;\n    border: 2px solid #748FC4;\n    box-shadow: 0px 4px 4px rgba(143, 145, 190, 0.25);\n    }\n    .edit-text {\n    color: #ffffff;\n    }\n    .book-button:hover {\n    background-color: #71C68A;\n    border: 2px solid #71C68A;\n    }\n</style>\n"]}]}