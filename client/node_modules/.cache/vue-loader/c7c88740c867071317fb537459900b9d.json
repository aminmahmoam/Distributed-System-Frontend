{"remainingRequest":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/aminmahmoudi/Desktop/DIT356/client 2/client/src/views/Account.vue?vue&type=style&index=0&id=7cbffb3a&lang=css&","dependencies":[{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/src/views/Account.vue","mtime":1671800748225},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/aminmahmoudi/Desktop/DIT356/client 2/client/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ib3ggewogICAgbWFyZ2luLXRvcDogM3JlbTsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IGF1dG87CiAgICBib3JkZXItcmFkaXVzOiAyNXB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbWFyZ2luLWxlZnQ6IDE4JTsKICAgIG1hcmdpbi1yaWdodDogMTglOwogICAgYmFja2dyb3VuZDogI2ZmZmZmZjsKICAgIHBhZGRpbmc6IDQwcHg7CiAgICBjb2xvcjogIzc0OEZDNDsKICAgIGJveC1zaGFkb3c6IDRweCAxMHB4IDEwcHggcmdiYSgxNDMsIDE0NSwgMTkwLCAwLjI1KTsKfQouZWRpdC1idXR0b24gewogICAgcGFkZGluZzogMTBweDsKICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbWFyZ2luLXRvcDogMXJlbTsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IGF1dG87CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzQ4RkM0OwogICAgY29sb3I6ICNmZmZmZmY7CiAgICBib3JkZXItcmFkaXVzOiAyNXB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYm9yZGVyOiAycHggc29saWQgIzc0OEZDNDsKICAgIGJveC1zaGFkb3c6IDBweCA0cHggNHB4IHJnYmEoMTQzLCAxNDUsIDE5MCwgMC4yNSk7Cn0KLmVkaXQtdGV4dCB7CiAgICBjb2xvcjogI2ZmZmZmZjsKfQouZWRpdC1idXR0b246aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogIzRFNjI4OTsKICAgIGJvcmRlcjogMnB4IHNvbGlkICM0RTYyODk7Cn0KLmNhbmNlbC1idXR0b24gewogICAgcGFkZGluZzogMTBweDsKICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbWFyZ2luLXRvcDogMXJlbTsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBoZWlnaHQ6IGF1dG87CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzQ4RkM0OwogICAgY29sb3I6ICNmZmZmZmY7CiAgICBib3JkZXItcmFkaXVzOiAyNXB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYm9yZGVyOiAycHggc29saWQgIzc0OEZDNDsKICAgIGJveC1zaGFkb3c6IDBweCA0cHggNHB4IHJnYmEoMTQzLCAxNDUsIDE5MCwgMC4yNSk7Cn0KLmNhbmNlbC1idXR0b246aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI0RENzY3NjsKICAgIGJvcmRlcjogMnB4IHNvbGlkICNERDc2NzY7Cn0K"},{"version":3,"sources":["Account.vue"],"names":[],"mappings":";AAiKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Account.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div>\n  <!-- Title -->\n    <div class=\"map-body\">\n    <p style=\"color: #748FC4; font-style: bold;\" class=\"map-text\">ACCOUNT DETAILS</p>\n  </div>\n    <!-- Accoutn details box -->\n    <div class=\"box\">\n        <b-row style=\"font-size: 17px;\">\n            <b-col style=\"text-align: left\">\n            <div style=\"margin-bottom: 12px;\">\n                <h>First name</h>\n            </div>\n            <div style=\"margin-bottom: 12px;\">\n                <h>Last Name</h>\n            </div>\n            <div style=\"margin-bottom: 12px;\">\n                <h>Email</h>\n            </div>\n            <div style=\"margin-bottom: 12px;\">\n                <h>Password</h>\n            </div>\n            </b-col>\n            <b-col style=\"text-align: center;\">\n                <div style=\"margin-bottom: 12px;\">\n                    <h>:</h>\n                </div>\n                <div style=\"margin-bottom: 12px;\">\n                    <h>:</h>\n                </div>\n                <div style=\"margin-bottom: 12px;\">\n                    <h>:</h>\n                </div>\n                <div style=\"margin-bottom: 12px;\">\n                    <h>:</h>\n                </div>\n            </b-col>\n            <b-col style=\"text-align: left\" v-if=\"editDetails === false\">\n                <div style=\"margin-bottom: 12px;\">\n                    <h>{{firstName}}</h>\n                </div>\n                <div style=\"margin-bottom: 12px;\">\n                    <h>{{lastName}}</h>\n                </div>\n                <div style=\"margin-bottom: 12px;\">\n                    <h>\n                        {{emailAddress}}\n                    </h>\n                </div>\n                <div style=\"margin-bottom: 12px;\">\n                    <h>******</h>\n                </div>\n            </b-col>\n\n            <!-- Edit account details -->\n            <b-col style=\"text-align: left;  font-size: 17px;\" v-if=\"editDetails === true\">\n                <div style=\"margin-bottom: 5px;\">\n                    <input style=\"width: 300px;\" placeholder=\"First Name\" v-model=\"firstName\">\n                </div>\n                <div style=\"margin-bottom: 5px;\">\n                    <input style=\"width: 300px;\" placeholder=\"Last Name\" v-model=\"lastName\">\n                </div>\n                <div style=\"margin-bottom: 5px;\">\n                    <input style=\"width: 300px;\" placeholder=\"Email\" v-model=\"emailAddress\">\n                </div>\n                <div style=\"margin-bottom: 5px;\">\n                    <input style=\"width: 300px;\" placeholder=\"Password\" >\n                </div>\n                <div style=\"margin-bottom: 5px;\">\n                    <input style=\"width: 300px;\" placeholder=\"Repeat password\">\n                </div>\n            </b-col>\n        </b-row>\n        <!-- Buttons -->\n        <div v-if=\"editDetails === false\" class=\"edit-button\" style=\"color: #748FC4\" v-on:click=\"editDetails = true\"><h class=\"edit-text\">Edit Details</h></div>\n        <div v-if=\"editDetails === true\" class=\"cancel-button\" style=\"color: #748FC4; margin-right: 5px;\" v-on:click=\"editDetails = false\"><h class=\"edit-text\">Cancel</h></div>\n        <div v-if=\"editDetails === true\" class=\"edit-button\" style=\"color: #748FC4\" v-on:click=\"editDetails = false\"><h class=\"edit-text\" @click=\"save()\">Save</h></div>\n    </div>\n</div>\n</template>\n\n<script>\nimport mqtt from '../MQTT'\nexport default {\n  name: 'Account',\n  props: ['Account'],\n  data() {\n    return {\n      editedUser: '',\n      editDetails: false,\n      hasAccount: false,\n      firstName: '',\n      lastName: '',\n      emailAddress: '',\n      password: ''\n    }\n  },\n  mounted() {\n    this.getInfo()\n\n  },\n  methods: {\n    parseJwt(token) {\n      const base64Url = token.split('.')[1]\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/')\n      const jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n      }).join(''))\n      let user = JSON.parse(jsonPayload)\n      return user\n\n    },\n    save() {\n\n      let data = {\n        firstName: this.firstName,\n        lastName: this.lastName,\n        emailAddress:  this.emailAddress,\n        password: this.password,\n        token: localStorage.getItem('loginToken')\n      }\n      let user = this.parseJwt(localStorage.loginToken)\n      let result = mqtt('patchU', `/users/${user._id}`, data, false)\n      setTimeout(() => {\n        if (result[0].data === '401 unauthorized') {\n        localStorage.removeItem('loginToken')\n      } else if (result[0].data.firstName){\n         console.log(result)\n      } else {\n        alert('Something went wrong! Plaese try again later.')\n      }\n       \n      }, 1000)\n    },\n\n    getInfo() {\n        let data = {\n            token: localStorage.getItem('loginToken')\n        }\n        let user = this.parseJwt(localStorage.loginToken)\n        let result = mqtt('getU', `/users/${user._id}`, data, false)\n      setTimeout(() => {\n        if (result[0].data === '401 unauthorized') {\n        localStorage.removeItem('loginToken')\n        \n      } else if (result[0].data.user){\n        this.firstName = result[0].data.user.firstName\n        this.lastName = result[0].data.user.lastName\n        this.emailAddress = result[0].data.user.emailAddress\n        this.password = result[0].data.user.password\n      } else {\n        alert('Something went wrong! Plaese try again later.')\n      }\n      }, 1000)\n    }\n  }\n}\n\n</script>\n\n<style>\n.box {\n    margin-top: 3rem;\n    box-sizing: border-box;\n    height: auto;\n    border-radius: 25px;\n    text-align: center;\n    margin-left: 18%;\n    margin-right: 18%;\n    background: #ffffff;\n    padding: 40px;\n    color: #748FC4;\n    box-shadow: 4px 10px 10px rgba(143, 145, 190, 0.25);\n}\n.edit-button {\n    padding: 10px;\n    display:inline-block;\n    text-align: center;\n    margin-top: 1rem;\n    box-sizing: border-box;\n    height: auto;\n    background-color: #748FC4;\n    color: #ffffff;\n    border-radius: 25px;\n    cursor: pointer;\n    border: 2px solid #748FC4;\n    box-shadow: 0px 4px 4px rgba(143, 145, 190, 0.25);\n}\n.edit-text {\n    color: #ffffff;\n}\n.edit-button:hover {\n    background-color: #4E6289;\n    border: 2px solid #4E6289;\n}\n.cancel-button {\n    padding: 10px;\n    display:inline-block;\n    text-align: center;\n    margin-top: 1rem;\n    box-sizing: border-box;\n    height: auto;\n    background-color: #748FC4;\n    color: #ffffff;\n    border-radius: 25px;\n    cursor: pointer;\n    border: 2px solid #748FC4;\n    box-shadow: 0px 4px 4px rgba(143, 145, 190, 0.25);\n}\n.cancel-button:hover {\n    background-color: #DD7676;\n    border: 2px solid #DD7676;\n}\n</style>\n"]}]}